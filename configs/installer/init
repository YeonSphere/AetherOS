#!/bin/busybox sh

# Mount essential filesystems
mount -t proc none /proc
mount -t sysfs none /sys
mount -t devtmpfs none /dev

# Set up basic environment
export PATH=/bin:/sbin:/usr/bin:/usr/sbin
export HOME=/root
export TERM=linux

# Create device nodes
[ -e /dev/console ] || mknod /dev/console c 5 1
[ -e /dev/null ] || mknod /dev/null c 1 3

# Start system initialization
clear
echo "Welcome to AetherOS Installer"
echo "Starting installation environment..."

# Start shell or installer
if grep -q "debug" /proc/cmdline; then
    echo "Starting debug shell..."
    exec /bin/sh
else
    echo "Starting installer..."
    exec /usr/bin/installer.sh
fi
